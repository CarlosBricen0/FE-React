"use strict";
(self["webpackChunkcomponents"] = self["webpackChunkcomponents"] || []).push([["atoms-Draggable-Draggable-stories"],{

/***/ "./stories/atoms/Draggable/Draggable.tsx":
/*!***********************************************!*\
  !*** ./stories/atoms/Draggable/Draggable.tsx ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Draggable": () => (/* binding */ Draggable)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react/jsx-runtime */ "./node_modules/react/jsx-runtime.js");


const Draggable = ({
  children,
  moveY = false,
  moveX = false,
  minX,
  minY,
  maxX,
  maxY
}) => {
  const elemRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);
  const dragProps = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    if (elemRef.current) {
      elemRef.current.style.left = `${minX | 0}px`;
      elemRef.current.style.top = `${minY | 0}px`;
    }
  }, [minX, minY]);
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    return () => {
      window.removeEventListener('mousemove', startDragging, false);
      window.removeEventListener('mouseup', stopDragging, false);
    };
  }, []);
  const initialiseDrag = event => {
    const {
      target,
      clientX,
      clientY
    } = event;
    const {
      offsetTop,
      offsetLeft
    } = target;
    const {
      left,
      top
    } = elemRef.current.getBoundingClientRect();
    dragProps.current = {
      dragStartLeft: left - offsetLeft,
      dragStartTop: top - offsetTop,
      dragStartX: clientX,
      dragStartY: clientY
    };
    window.addEventListener('mousemove', startDragging, false);
    window.addEventListener('mouseup', stopDragging, false);
  };
  const stopDragging = () => {
    window.removeEventListener('mousemove', startDragging, false);
    window.removeEventListener('mouseup', stopDragging, false);
  };
  const handleChange = ({
    touches
  }) => {
    const {
      clientX,
      clientY
    } = touches[0];
    handleValidation({
      valueX: clientX,
      valueY: clientY
    });
  };
  const startDragging = ({
    clientX,
    clientY
  }) => {
    const valueX = dragProps.current.dragStartLeft + clientX - dragProps.current.dragStartX;
    const valueY = dragProps.current.dragStartTop + clientY - dragProps.current.dragStartY;
    handleValidation({
      valueX,
      valueY
    });
  };
  const handleValidation = ({
    valueX,
    valueY
  }) => {
    if (moveX) {
      if (maxX && maxX > valueX) {
        valueX = maxX;
      } else if (minX && minX < valueX) {
        valueX = minX;
      }
      elemRef.current.style.left = `${valueX}px`;
    }
    if (moveY) {
      if (maxY && maxY > valueY) {
        valueY = maxY;
      } else if (minY && minY < valueY) {
        valueY = minY;
      }
      elemRef.current.style.top = `${valueY}px`;
    }
  };
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div", {
    onMouseDown: initialiseDrag,
    onTouchMove: handleChange,
    ref: elemRef,
    style: {
      width: '100%',
      position: 'fixed',
      touchAction: 'none'
    },
    children: children
  });
};
Draggable.displayName = "Draggable";

/***/ }),

/***/ "./stories/atoms/Draggable/Draggable.stories.tsx":
/*!*******************************************************!*\
  !*** ./stories/atoms/Draggable/Draggable.stories.tsx ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Base": () => (/* binding */ Base),
/* harmony export */   "__namedExportsOrder": () => (/* binding */ __namedExportsOrder),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Draggable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Draggable */ "./stories/atoms/Draggable/Draggable.tsx");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react/jsx-runtime */ "./node_modules/react/jsx-runtime.js");



/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  title: 'Atoms/Draggable',
  component: _Draggable__WEBPACK_IMPORTED_MODULE_1__.Draggable
});
const Template = args => {
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_Draggable__WEBPACK_IMPORTED_MODULE_1__.Draggable, {
    ...args,
    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div", {
      style: {
        width: 100,
        height: 100,
        backgroundColor: 'grey'
      },
      children: "Test"
    })
  });
};
Template.displayName = "Template";
const Base = Template.bind({});
Base.args = {
  moveY: true,
  moveX: true
};
const __namedExportsOrder = ["Base"];
Base.parameters = {
  ...Base.parameters,
  docs: {
    ...Base.parameters?.docs,
    source: {
      originalSource: "args => {\n  return /*#__PURE__*/_jsx(Draggable, {\n    ...args,\n    children: /*#__PURE__*/_jsx(\"div\", {\n      style: {\n        width: 100,\n        height: 100,\n        backgroundColor: 'grey'\n      },\n      children: \"Test\"\n    })\n  });\n}",
      ...Base.parameters?.docs?.source
    }
  }
};

/***/ })

}]);
//# sourceMappingURL=atoms-Draggable-Draggable-stories.iframe.bundle.js.map