"use strict";
self["webpackHotUpdatecomponents"]("stories_molecules_Modal_Modal_tsx",{

/***/ "./stories/molecules/Modal/Modal.tsx":
/*!*******************************************!*\
  !*** ./stories/molecules/Modal/Modal.tsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ID_MODAL_ACTION": () => (/* binding */ ID_MODAL_ACTION),
/* harmony export */   "ID_MODAL_HANDLER": () => (/* binding */ ID_MODAL_HANDLER),
/* harmony export */   "Modal": () => (/* binding */ Modal)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
Object(function webpackMissingModule() { var e = new Error("Cannot find module 'classnames'"); e.code = 'MODULE_NOT_FOUND'; throw e; }());
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../helpers */ "./helpers/index.ts");
/* harmony import */ var _atoms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../atoms */ "./stories/atoms/index.ts");
/* harmony import */ var _layout__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../layout */ "./stories/layout/index.ts");
/* harmony import */ var _Modal_module_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Modal.module.css */ "./stories/molecules/Modal/Modal.module.css");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react/jsx-runtime */ "./node_modules/react/jsx-runtime.js");









const ID_MODAL_HANDLER = 'modal_handler';
const ID_MODAL_ACTION = 'modal_handler_action';
const Modal = ({
  adjusted,
  backgroundColor = (0,_helpers__WEBPACK_IMPORTED_MODULE_2__.getGlobalStyle)('--color-base-white'),
  borderRadius = (0,_helpers__WEBPACK_IMPORTED_MODULE_2__.getGlobalStyle)('--border-radius-md'),
  children,
  className,
  color = 'white',
  colorButtonDrag = (0,_helpers__WEBPACK_IMPORTED_MODULE_2__.getGlobalStyle)('--color-neutral-gray-silver'),
  customCssFullScreen,
  customIcon = 'AlertIcon',
  customIconPadding = '0px',
  dragRatio = 0.5,
  errorModal,
  fontSizeMobile,
  fullScreen,
  halfScreen = false,
  height = 'initial',
  hiddenX = false,
  hideOverlay = false,
  iconPadding,
  iconProps,
  iconSize = 26.5,
  isCloseIcon = true,
  isDraggable = true,
  isOpen = false,
  justifyContent,
  level,
  marginFullScreen = '60px 0 0 0',
  maxHeight = 'initial',
  maxHeightFullScreen,
  maxWidth = '315px',
  minFullscreenTranslation = 0,
  minHeight = '20%',
  minHeightFullScreen = 'calc(100vh - 60px)',
  modalTitle = '',
  padding = '20px',
  position = null,
  site = 'unimarc',
  sizeIconClose = 14,
  titleModalMobile = false,
  top,
  widthButtonDrag = '45px',
  toggle,
  toggleOutside = () => {
    return;
  }
}) => {
  const modalRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);
  const dragProps = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();
  const handleDragStart = e => {
    e.preventDefault();
    const {
      clientX,
      clientY
    } = e.touches[0];
    const {
      offsetTop,
      offsetLeft
    } = modalRef.current;
    const {
      left,
      top
    } = modalRef.current.getBoundingClientRect();
    dragProps.current = {
      dragStartLeft: left - offsetLeft,
      dragStartTop: top - offsetTop,
      dragStartX: clientX,
      dragStartY: clientY,
      transalteY: 0
    };
    window.addEventListener('touchmove', handleDrag, false);
    window.addEventListener('touchend', handleDragEnd, false);
  };
  const handleDragEnd = () => {
    const translateAmount = dragProps.current.transalteY;
    const bodyHeight = halfScreen ? document.body.clientHeight / 4 : document.body.clientHeight;
    const maxTranslation = dragRatio * bodyHeight;
    if (minFullscreenTranslation && translateAmount > maxTranslation) {
      const originTranslateAmount = minFullscreenTranslation !== 0 ? translateAmount : minFullscreenTranslation;
      const animation = modalRef.current.animate([{
        transform: `translateY(${originTranslateAmount}px)`
      }, {
        transform: `translateY(${minFullscreenTranslation}px)`
      }], {
        duration: 200
      });
      animation.addEventListener('finish', () => {
        dragProps.current.transalteY = minFullscreenTranslation;
        modalRef.current.style.transform = `translateY(${minFullscreenTranslation}px)`;
      });
      animation.addEventListener('finish', () => {
        toggleOutside();
      });
    }
    if (translateAmount < maxTranslation && translateAmount > 0) {
      const animation = modalRef.current.animate([{
        transform: `translateY(${translateAmount}px)`
      }, {
        transform: `translateY(0px)`
      }], {
        duration: 200
      });
      animation.addEventListener('finish', () => {
        dragProps.current.transalteY = 0;
        modalRef.current.style.transform = 'translateY(0px)';
      });
    }
    window.removeEventListener('touchmove', handleDrag, false);
    window.removeEventListener('touchend', handleDragEnd, false);
  };
  const handleDrag = e => {
    e.preventDefault();
    if (!e.touches?.length) return;
    const {
      clientY
    } = e.touches[0];
    dragProps.current.transalteY = dragProps.current.dragStartTop + clientY - dragProps.current.dragStartY;
    if (dragProps.current.transalteY < 0) dragProps.current.transalteY = 0;
    modalRef.current.style.transform = `translateY(${dragProps.current.transalteY}px)`;
  };
  const modalIconName = customIcon;
  const modalIconSize = iconSize;
  const isUnimarc = site === 'unimarc';
  const classes = `${isUnimarc ? Object(function webpackMissingModule() { var e = new Error("Cannot find module 'classnames'"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(_Modal_module_css__WEBPACK_IMPORTED_MODULE_5__["default"].error_icon) : Object(function webpackMissingModule() { var e = new Error("Cannot find module 'classnames'"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(_Modal_module_css__WEBPACK_IMPORTED_MODULE_5__["default"].error_icon_alvi)}`;
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    if (isOpen && typeof toggleOutside === 'function') window.addEventListener('keyup', e => {
      return e.code === 'Escape' && toggleOutside();
    });
    return () => {
      return isOpen && window.removeEventListener('keyup', () => {
        return;
      });
    };
  }, [isOpen]);
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Fragment, {
    children: isOpen ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Fragment, {
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(_layout__WEBPACK_IMPORTED_MODULE_4__.Container, {
        className: Object(function webpackMissingModule() { var e = new Error("Cannot find module 'classnames'"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(_Modal_module_css__WEBPACK_IMPORTED_MODULE_5__["default"].modalBg, 'modal__bg', {
          [_Modal_module_css__WEBPACK_IMPORTED_MODULE_5__["default"].modal__customCssFullScreen]: customCssFullScreen,
          [_Modal_module_css__WEBPACK_IMPORTED_MODULE_5__["default"].modal__fullScreen]: fullScreen,
          [_Modal_module_css__WEBPACK_IMPORTED_MODULE_5__["default"].modal__hideOverlay]: hideOverlay,
          [_Modal_module_css__WEBPACK_IMPORTED_MODULE_5__["default"][`modal__level-${level}`]]: !!level
        }),
        maxHeight: null,
        maxWidth: null,
        position: position,
        top: top,
        children: [errorModal && isUnimarc && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Fragment, {
          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div", {
            className: classes,
            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_layout__WEBPACK_IMPORTED_MODULE_4__.Container, {
              justifyContent: "center",
              padding: customIconPadding,
              children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_3__.Icon, {
                color: color,
                customSize: modalIconSize,
                name: modalIconName
              })
            })
          })
        }), errorModal && !isUnimarc && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Fragment, {
          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div", {
            className: classes,
            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_layout__WEBPACK_IMPORTED_MODULE_4__.Container, {
              justifyContent: "center",
              padding: customIconPadding,
              children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_3__.Icon, {
                color: color,
                customSize: modalIconSize,
                name: modalIconName
              })
            })
          })
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_layout__WEBPACK_IMPORTED_MODULE_4__.Container, {
          customHeight: "100%",
          customWidth: "100%",
          onClick: toggleOutside,
          position: "absolute"
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(_layout__WEBPACK_IMPORTED_MODULE_4__.Container, {
          alignItems: "center",
          backgroundColor: backgroundColor,
          borderRadius: borderRadius,
          customHeight: height,
          height: height,
          justifyContent: "center",
          maxHeight: maxHeight,
          maxWidth: maxWidth,
          minHeight: minHeight,
          overflow: "hidden",
          padding: padding,
          position: "relative",
          ref: modalRef,
          ...(fullScreen && {
            width: '100%',
            margin: marginFullScreen,
            minHeight: minHeightFullScreen,
            maxHeight: maxHeightFullScreen,
            maxWidth: '100%'
          }),
          className: Object(function webpackMissingModule() { var e = new Error("Cannot find module 'classnames'"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(_Modal_module_css__WEBPACK_IMPORTED_MODULE_5__["default"].overflow, className, {
            [_Modal_module_css__WEBPACK_IMPORTED_MODULE_5__["default"].modal__adjusted]: adjusted
          }),
          children: [fullScreen && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(_layout__WEBPACK_IMPORTED_MODULE_4__.Column, {
            id: ID_MODAL_HANDLER,
            onTouchStart: isDraggable && handleDragStart,
            position: "absolute",
            top: "0",
            touchAction: 'none',
            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_layout__WEBPACK_IMPORTED_MODULE_4__.Container, {
              alignSelf: "center",
              backgroundColor: colorButtonDrag,
              borderRadius: (0,_helpers__WEBPACK_IMPORTED_MODULE_2__.getGlobalStyle)('--border-radius-sm'),
              clickable: 'grab',
              customHeight: "6px",
              id: ID_MODAL_ACTION,
              margin: "10px",
              width: widthButtonDrag,
              zIndex: "3"
            }), titleModalMobile && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Fragment, {
              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_layout__WEBPACK_IMPORTED_MODULE_4__.Spacer.Horizontal, {
                size: 12
              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_layout__WEBPACK_IMPORTED_MODULE_4__.Row, {
                alignItems: "center",
                justifyContent: justifyContent,
                width: "100%",
                children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_3__.Text, {
                  fontSize: fontSizeMobile,
                  fontWeight: "semibold",
                  lineHeight: "25px",
                  children: modalTitle
                })
              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_layout__WEBPACK_IMPORTED_MODULE_4__.Spacer.Horizontal, {
                size: 24
              })]
            })]
          }), !hiddenX && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_layout__WEBPACK_IMPORTED_MODULE_4__.Container, {
            absoluteDefault: "topRight",
            alignItems: "start",
            justifyContent: "end",
            maxWidth: "max-content",
            onClick: toggle,
            padding: iconPadding ?? padding,
            position: "absolute",
            zIndex: '1',
            children: isCloseIcon && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div", {
              className: Object(function webpackMissingModule() { var e = new Error("Cannot find module 'classnames'"); e.code = 'MODULE_NOT_FOUND'; throw e; }())({
                [_Modal_module_css__WEBPACK_IMPORTED_MODULE_5__["default"].icon__adjusted]: adjusted
              }),
              children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_3__.Icon, {
                clickable: "pointer",
                color: (0,_helpers__WEBPACK_IMPORTED_MODULE_2__.getGlobalStyle)('--color-icons-gray'),
                customSize: sizeIconClose,
                name: "Close",
                ...iconProps
              })
            })
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_layout__WEBPACK_IMPORTED_MODULE_4__.Column, {
            alignItems: "center",
            customHeight: height,
            justifyContent: justifyContent,
            children: children
          })]
        })]
      })
    }) : null
  });
};

/***/ })

});
//# sourceMappingURL=stories_molecules_Modal_Modal_tsx.40f66dcf9be584c763ba.hot-update.js.map